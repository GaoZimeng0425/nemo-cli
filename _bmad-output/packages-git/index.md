# @nemo-cli/git æ¨¡å—æ–‡æ¡£ç´¢å¼•

> ç”Ÿæˆæ—¥æœŸï¼š2025-11-26
> æ¨¡å—ç‰ˆæœ¬ï¼š0.0.1
> æ‰«æçº§åˆ«ï¼šæ·±åº¦æ‰«æï¼ˆDeep Diveï¼‰

---

## ğŸ“¦ æ¨¡å—æ¦‚è§ˆ

| å±æ€§ | å€¼ |
|------|-----|
| **åŒ…å** | `@nemo-cli/git` |
| **CLI å‘½ä»¤** | `ng` |
| **æè¿°** | Git æ“ä½œè¾…åŠ© CLI å·¥å…· |
| **ç±»å‹** | CLI å·¥å…·åº“ |
| **è¯­è¨€** | TypeScript (ESM) |
| **Node ç‰ˆæœ¬è¦æ±‚** | `^20.19.0 \|\| >=22.12.0` |

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
packages/git/
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ index.mjs          # CLI å…¥å£ç‚¹
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts           # æ¨¡å—ä¸»å…¥å£ï¼Œå‘½ä»¤æ³¨å†Œ
â”‚   â”œâ”€â”€ utils.ts           # Git æ“ä½œå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”œâ”€â”€ index.ts       # å¸®åŠ©ä¿¡æ¯å¸¸é‡
â”‚   â”‚   â””â”€â”€ stash.ts       # Stash ç›¸å…³å¸¸é‡
â”‚   â””â”€â”€ commands/
â”‚       â”œâ”€â”€ branch.ts      # åˆ†æ”¯ç®¡ç†å‘½ä»¤
â”‚       â”œâ”€â”€ checkout.ts    # åˆ†æ”¯åˆ‡æ¢å‘½ä»¤
â”‚       â”œâ”€â”€ commit.ts      # æäº¤å‘½ä»¤
â”‚       â”œâ”€â”€ commit-options.ts  # Commitlint é…ç½®
â”‚       â”œâ”€â”€ diff.ts        # å·®å¼‚æŸ¥çœ‹å‘½ä»¤
â”‚       â”œâ”€â”€ list.ts        # åˆ†æ”¯åˆ—è¡¨å‘½ä»¤
â”‚       â”œâ”€â”€ merge.ts       # åˆå¹¶å‘½ä»¤
â”‚       â”œâ”€â”€ pull.ts        # æ‹‰å–å‘½ä»¤
â”‚       â”œâ”€â”€ push.ts        # æ¨é€å‘½ä»¤
â”‚       â”œâ”€â”€ stash.ts       # æš‚å­˜å‘½ä»¤
â”‚       â””â”€â”€ status.ts      # çŠ¶æ€æŸ¥çœ‹å‘½ä»¤ (NEW)
â”œâ”€â”€ dist/                  # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.build.json
â””â”€â”€ rolldown.config.ts
```

---

## ğŸ“– æ–‡æ¡£å¯¼èˆª

### æ ¸å¿ƒæ–‡æ¡£

- [**æ¶æ„è®¾è®¡**](./architecture.md) - æ¨¡å—æ¶æ„ã€è®¾è®¡æ¨¡å¼ã€æŠ€æœ¯å†³ç­–
- [**æºç åˆ†æ**](./source-tree-analysis.md) - è¯¦ç»†çš„æºç ç»“æ„å’Œæ–‡ä»¶è¯´æ˜
- [**å‘½ä»¤å‚è€ƒ**](./command-reference.md) - å®Œæ•´çš„ CLI å‘½ä»¤å’Œé€‰é¡¹å‚è€ƒ
- [**å¼€å‘æŒ‡å—**](./development-guide.md) - æœ¬åœ°å¼€å‘ã€æ„å»ºã€æµ‹è¯•è¯´æ˜

### ä¾èµ–å…³ç³»

| ä¾èµ–åŒ… | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `@nemo-cli/shared` | workspace | å…±äº«å·¥å…·åº“ï¼ˆcommanderã€promptsã€git-handle ç­‰ï¼‰ |
| `@nemo-cli/ui` | workspace | React TUI ç»„ä»¶åº“ï¼ˆErrorMessageã€BigText ç­‰ï¼‰ |

---

## âš¡ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…¨å±€å®‰è£…
pnpm add @nemo-cli/git --global

# æˆ–ä» monorepo æ ¹ç›®å½•é“¾æ¥
cd packages/git
pnpm link -g
```

### åŸºæœ¬ä½¿ç”¨

```bash
# æŸ¥çœ‹å¸®åŠ©
ng -h
ng <command> -h

# å¸¸ç”¨å‘½ä»¤
ng commit          # äº¤äº’å¼æäº¤
ng pull / ng pl    # æ‹‰å–è¿œç¨‹åˆ†æ”¯
ng push / ng ps    # æ¨é€åˆ°è¿œç¨‹
ng checkout / ng co        # åˆ‡æ¢åˆ†æ”¯ï¼ˆè‡ªåŠ¨ stashï¼‰
ng co -b           # åˆ›å»ºæ–°åˆ†æ”¯
ng branch delete   # åˆ é™¤åˆ†æ”¯
ng branch clean    # æ¸…ç†å·²åˆå¹¶åˆ†æ”¯
ng stash           # Stash ç®¡ç†
ng stash list      # æŸ¥çœ‹ stash åˆ—è¡¨ï¼ˆç¾è§‚ UIï¼‰
ng status / ng s   # äº¤äº’å¼çŠ¶æ€æŸ¥çœ‹å™¨ï¼ˆä¸¤æ å¸ƒå±€ï¼‰
ng diff            # æŸ¥çœ‹å·®å¼‚
ng merge           # åˆå¹¶åˆ†æ”¯
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### 1. æ™ºèƒ½æäº¤æµç¨‹ (`ng commit`)

- è‡ªåŠ¨æ£€æµ‹ staged/unstaged æ–‡ä»¶
- æ”¯æŒé€‰æ‹©æ€§æš‚å­˜æ–‡ä»¶
- é›†æˆ `lint-staged` ä»£ç æ£€æŸ¥
- è¯»å– `commitlint.config` é…ç½®
- è‡ªåŠ¨ä»åˆ†æ”¯åæå– ticket å·
- æ”¯æŒ conventional commit æ ¼å¼
- å¯é€‰æ¨é€åˆ°è¿œç¨‹

### 2. å®‰å…¨åˆ†æ”¯åˆ‡æ¢ (`ng checkout`)

- **è‡ªåŠ¨ stash**ï¼šåˆ‡æ¢å‰è‡ªåŠ¨æš‚å­˜æœªæäº¤æ›´æ”¹
- **è‡ªåŠ¨ pop**ï¼šåˆ‡æ¢åè‡ªåŠ¨æ¢å¤æš‚å­˜å†…å®¹
- æ”¯æŒæœ¬åœ°/è¿œç¨‹åˆ†æ”¯é€‰æ‹©
- æ”¯æŒåˆ›å»ºæ–°åˆ†æ”¯ï¼ˆ`-b` é€‰é¡¹ï¼‰
- é¢„è®¾åˆ†æ”¯ç±»å‹æ¨¡æ¿ï¼š`feature/PRIME-`ã€`feature/`ã€`bugfix/`

### 3. åˆ†æ”¯æ¸…ç†å·¥å…· (`ng branch clean`)

- æ£€æµ‹å·²åˆå¹¶åˆ° main çš„åˆ†æ”¯
- æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤ï¼ˆ1æœˆ/3æœˆ/1å¹´/å…¨éƒ¨ï¼‰
- æ‰¹é‡åˆ é™¤ç¡®è®¤
- æ˜¾ç¤ºæ¯ä¸ªåˆ†æ”¯æœ€åæäº¤æ—¶é—´

### 4. äº¤äº’å¼ Stash ç®¡ç† (`ng stash`)

- ä¿å­˜/åˆ—è¡¨/å¼¹å‡º/åˆ é™¤ stash
- æ”¯æŒæ¸…é™¤å…¨éƒ¨ stash
- è‡ªåŠ¨ç”Ÿæˆæ—¶é—´æˆ³å‘½å
- **ä½¿ç”¨ Ink ç»„ä»¶çš„ç¾è§‚åˆ—è¡¨æ˜¾ç¤º** (NEW)
- æ˜¾ç¤ºæ¯ä¸ª stash çš„åˆ†æ”¯ã€æ¶ˆæ¯ã€æ–‡ä»¶æ•°é‡å’Œæ–‡ä»¶åˆ—è¡¨
- é«˜äº®æ˜¾ç¤ºæœ€æ–°çš„ stash

### 5. äº¤äº’å¼çŠ¶æ€æŸ¥çœ‹å™¨ (`ng status`) (NEW)

- **ä¸¤æ å¸ƒå±€**ï¼šå·¦ä¾§æ–‡ä»¶åˆ—è¡¨ï¼Œå³ä¾§ diff å†…å®¹
- **é”®ç›˜å¯¼èˆª**ï¼šæ”¯æŒ Vim é£æ ¼ hjkl é”®ä½
- **é¢æ¿åˆ‡æ¢**ï¼šâ† â†’ åœ¨æ–‡ä»¶åˆ—è¡¨å’Œ diff é¢æ¿é—´åˆ‡æ¢
- **æ»šåŠ¨æŸ¥çœ‹**ï¼šâ†‘ â†“ æ»šåŠ¨æŸ¥çœ‹é•¿ diff å†…å®¹
- **è¯­æ³•é«˜äº®**ï¼šç»¿(+)çº¢(-)å½©è‰²æ˜¾ç¤º diff
- **ç»ˆç«¯è‡ªé€‚åº”**ï¼šæ ¹æ®ç»ˆç«¯çª—å£é«˜åº¦åŠ¨æ€è°ƒæ•´

### 6. æ™ºèƒ½åˆå¹¶å¤„ç†

- Pull æ—¶è‡ªåŠ¨æ£€æµ‹åˆå¹¶æäº¤
- æ”¯æŒè‡ªå®šä¹‰åˆå¹¶æäº¤ä¿¡æ¯
- ä½¿ç”¨ç³»ç»Ÿç¼–è¾‘å™¨ç¼–è¾‘ï¼ˆEDITOR ç¯å¢ƒå˜é‡ï¼‰

---

## ğŸ”§ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| TypeScript | ^5.9.3 | ä¸»è¦å¼€å‘è¯­è¨€ |
| Rolldown | 1.0.0-beta.51 | æ„å»ºå·¥å…· |
| Commander.js | ^14.0.2 | CLI æ¡†æ¶ï¼ˆé€šè¿‡ @nemo-cli/sharedï¼‰ |
| @clack/prompts | 1.0.0-alpha.4 | äº¤äº’å¼æç¤ºï¼ˆé€šè¿‡ @nemo-cli/sharedï¼‰ |
| Ink | ^6.5.0 | React TUIï¼ˆé€šè¿‡ @nemo-cli/uiï¼‰ |
| tinyexec/execa | latest | è¿›ç¨‹æ‰§è¡Œ |

---

## ğŸ“Š å‘½ä»¤é€ŸæŸ¥è¡¨

| å‘½ä»¤ | åˆ«å | åŠŸèƒ½ | é€‰é¡¹ |
|------|------|------|------|
| `ng commit` | - | äº¤äº’å¼æäº¤ | - |
| `ng pull` | `ng pl` | æ‹‰å–è¿œç¨‹åˆ†æ”¯ | - |
| `ng push` | `ng ps` | æ¨é€åˆ°è¿œç¨‹ | - |
| `ng checkout` | `ng co` | åˆ‡æ¢åˆ†æ”¯ | `-l`, `-r`, `-b [name]` |
| `ng branch delete` | - | åˆ é™¤åˆ†æ”¯ | `-r` (è¿œç¨‹) |
| `ng branch clean` | - | æ¸…ç†å·²åˆå¹¶åˆ†æ”¯ | - |
| `ng list` | `ng ls` | åˆ—å‡ºåˆ†æ”¯ | `-l`, `-r`, `-a` |
| `ng diff` | `ng di` | æŸ¥çœ‹å·®å¼‚ | `-l`, `-r` |
| `ng merge` | `ng mg` | åˆå¹¶åˆ†æ”¯ | `-l`, `-r`, `-b <branch>` |
| `ng stash` | `ng st` | Stash ç®¡ç† | `save`, `list`, `pop`, `drop`, `clear` |
| `ng stash save` | `ng st s` | ä¿å­˜ stash | `[message]` |
| `ng stash list` | `ng st ls` | åˆ—å‡º stash (Ink UI) | - |
| `ng stash pop` | `ng st p` | å¼¹å‡º stash | - |
| `ng stash drop` | `ng st d` | åˆ é™¤ stash | - |
| `ng status` | `ng s` | äº¤äº’å¼çŠ¶æ€æŸ¥çœ‹å™¨ | - |

---

## ğŸ”— ç›¸å…³èµ„æº

- [æ ¹é¡¹ç›® README](../../README.md)
- [@nemo-cli/shared æ–‡æ¡£](../packages-shared/) _(å¾…ç”Ÿæˆ)_
- [@nemo-cli/ui æ–‡æ¡£](../packages-ui/) _(å¾…ç”Ÿæˆ)_
